
@model IEnumerable<IdentityRole>
@*<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />*@

@{ ViewBag.Title = "الصلاحيات";
    Layout = "~/Views/Shared/_Layout.cshtml"; }

<div class="row col-12">
    <div class="col-10">
        <h2 style="text-align:right">الصلاحيات</h2>
    </div>
</div>

<br />

<div class="modal fade" id="myModal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <a href="#" class="close" data-dismiss="modal">&times;</a>
                <div class="col" style="text-align:right"><h3>بحث عن صلاحية</h3></div>
            </div>
            <div class="modal-body" id="myModalBodyDiv">


            </div>
            <div class="modal-footer">
                <a href="#" class="btn btn-default" data-dismiss="modal">اغلاق</a>

            </div>

        </div>

    </div>

</div>

<div id="PlaceHolderHereUser"></div>
<div class="card border-secondary shadow h-100 py-2">
    <div class="card-body">
        <div class="row no-gutters align-items-center">
            <div class="col mr-9">
                <div class="col-lg-4">
                    <a class="btn btn-lg btn-info btn-block" style="width:auto" asp-action="CreateRole"
                       asp-controller="admin">إضافة صلاحية جديدة</a>
                </div>
                <div class="col mr-9">

                    <div class="col mr-9">
                        @if (Model.Any())
                        {
                        <table class="table table-striped table-bordered media-table" id="tbl" name="tbl" style="background-color:white">
                            <thead>
                                <tr>
                                    <th hidden>
                                        الرقم
                                    </th>
                                    <th>
                                        إسم الصلاحية
                                    </th>
                                    <th></th>

                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var role in Model)
                            {
                                <tr>
                                    <td hidden>@role.Id</td>
                                    <td>
                                        @role.Name
                                    </td>
                                    <td>

                                        <form method="post" asp-action="DeleteRole" asp-route-id="@role.Id">

                                            <a asp-action="EditRole" asp-controller="Admin"
                                               asp-route-id="@role.Id" class="btn btn-info text-white" style="cursor:pointer">
                                                <span class="glyphicon glyphicon-pencil">تعديل</span>
                                            </a>


                                            <button type="submit" class="btn btn-danger" onclick="return confirm('هل انت متأكد من حذف المستخدم؟ : @role.Name')">
                                                <span class="glyphicon glyphicon-trash">حذف</span>
                                            </button>

                                            <button type="button" class="btn btn-primary" data-toggle="ajax-modal" data-target="#addUserr"
                                                    data-url="@Url.Action($"EditUsersInRole?roleId={@role.Id}")">
                                                إضافة مستخدمين
                                            </button>
                                            @*<a asp-action="EditUsersInRole" asp-controller="Admin"
                                       asp-route-roleId="@role.Id" class="btn btn-dark">
                                        إضافة مستخدمين
                                    </a>*@

                                        </form>



                                    </td>
                                </tr>
}
                            </tbody>
                        </table> }
                else
                {
                        <p><h4 style="text-align:center">لا توجد بيانات</h4></p>}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



@section Scripts
{
    <partial name="_ValidationScriptsPartial" />

    <script>
            @*$(document).ready(function () {
                var Message = '@TempData["Message"]';
                if (Message == 1) {
                    NToast(
                        "#1ea244",
                        "tl",
                        "تم الحفظ بنجاح",
                        true,
                        "fa fa-save",
                        true,
                        100,
                    )
                }
                if (Message == 2) {
                    NToast(
                        "#1ea244",
                        "tl",
                        "تم التحديث بنجاح",
                        true,
                        "fa fa-check",
                        true,
                        100,
                    )
                }
                if (Message == 3) {
                    NToast(
                        "#1ea244",
                        "tl",
                        "تم الحذف بنجاح",
                        true,
                        "fa fa-trash",
                        true,
                        100,
                    )
                }
                if (Message == 4) {
                    NToast(
                        "#e4483d",
                        "tl",
                        "لا يمكن الحذف لارتباطه في بيانات أخرى",
                        true,
                        "fa fa-info",
                        true,
                        100,
                    )
                }
                if (Message == 5) {
                    NToast(
                        "#e4483d",
                        "tl",
                        "حدث خطاءغير معروف يرجى التواصل مع مدير النظام",
                        true,
                        "fa e-fe-access-error",
                        true,
                        100,
                    )
                }

                if (Message == 6) {
                    NToast(
                        "#D74323",
                        "tl",
                        "يرجى اختيار الصلاحية من القائمة",
                        true,
                        "fa fa-info",
                        true,
                        100,
                         )
                     }
               if (Message == 7) {
                    NToast(
                        "#D74323",
                        "tl",
                        "المستخدم موجود مسبقا",
                          true,
                      "fa fa-info",
                        true,
                       100,
                     )
                  }
            });*@

    </script>
}


<script>
    //var SearchForEmployee = function (SearchText, choice) {
    //    var url = "/User/ShowUsers";
    //    url += '?SearchText=' + SearchText + '&choice=' + choice;
    //    $("#myModalBodyDiv").load(url, function () {
    //        $("#myModal").modal("show");

    //    })
    //}
</script>





